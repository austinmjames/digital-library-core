@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Default Variable Mappings (Paper / Primary Identity) */
  --paper: #faf9f6;
  --ink: #18181b; /* Zinc-900 */
  --gold: #f59e0b; /* Amber-500 */
  --accent: #eab308; /* Yellow-500 */

  /* Sidebar Identity (PRD Inverse Theme) */
  --sidebar-bg: #09090b; /* Zinc-950 */
  --sidebar-fg: #a1a1aa; /* Zinc-400 */

  /* Reader Dynamic Defaults (Syncing Layer) */
  --reader-font-size: 20px;
  --reader-line-height: 1.6;
  --bezier-stroke: #d4d4d8;
}

/* Theme Class Overrides */
html.paper {
  --paper: #faf9f6;
  --ink: #18181b;
  --bezier-stroke: #d4d4d8;
}

html.sepia {
  --paper: #f4ecd8;
  --ink: #433422;
  --bezier-stroke: #c2b3a3;
}

html.dark {
  --paper: #09090b;
  --ink: #f4f4f5;
  --sidebar-bg: #000000;
  --bezier-stroke: #3f3f46;
}

@layer base {
  body {
    @apply bg-[var(--paper)] text-[var(--ink)] antialiased;
    /* Scholar-Grade Typography Stack */
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      sans-serif;
    transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
      color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .font-serif-hebrew {
    font-family: "Noto Serif Hebrew", serif;
  }
}

@layer components {
  /* Spatial UI Overlay Container */
  .spatial-overlay {
    @apply absolute inset-0 pointer-events-none z-30;
  }

  /* Universal Paper Texture (Technical Manifest 4.1) */
  .paper-texture {
    @apply fixed inset-0 pointer-events-none opacity-[0.02] z-0;
    background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
  }

  /* Reader Typography Tokens (Phase 2 - Context Aware) */
  .verse-text-he {
    @apply font-serif-hebrew text-right select-all transition-all duration-300;
    font-size: var(--reader-font-size);
    line-height: calc(var(--reader-line-height) * 1.4);
  }

  .verse-text-en {
    @apply font-sans opacity-75 select-all transition-all duration-300;
    font-size: calc(var(--reader-font-size) * 0.85);
    line-height: var(--reader-line-height);
  }

  /* Scholarly Margins (Gemara Margins) */
  .commentary-card {
    @apply p-6 rounded-[2rem] border transition-all duration-500 hover:shadow-2xl;
    background-color: color-mix(in srgb, var(--paper), transparent 20%);
    border-color: color-mix(in srgb, var(--ink), transparent 94%);
  }

  .commentary-card.active {
    @apply border-amber-500 shadow-xl scale-[1.02];
    background-color: color-mix(in srgb, var(--paper), white 60%);
  }
}

@layer utilities {
  /* Custom 52-Column Grid for Scholarship Impact Heatmap */
  .grid-cols-52 {
    grid-template-columns: repeat(52, minmax(0, 1fr));
  }

  /* High-Contrast selection for scholarly highlighting */
  .selection-gold ::selection {
    @apply bg-amber-500/30 text-zinc-950;
  }
}

/* Custom Scrollbar (Subtle/Minimalist) */
::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}
::-webkit-scrollbar-track {
  @apply bg-transparent;
}
::-webkit-scrollbar-thumb {
  @apply bg-zinc-400/20 rounded-full hover:bg-zinc-900/40 transition-colors;
}

/* Animations for Logic Transitions */
@keyframes fadeInSlide {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-reader-content {
  animation: fadeInSlide 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.reader-container {
  @apply max-w-5xl mx-auto w-full px-6 md:px-12;
}

/* High-Performance Custom Scrollbar for Dark Mode */
.dark ::-webkit-scrollbar-thumb {
  @apply bg-zinc-700;
}
